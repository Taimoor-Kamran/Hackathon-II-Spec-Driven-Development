# Phase II: Todo Full-Stack Web Application - Constitution

## Project Identity
**Project Name:** Phase II - Todo Full-Stack Web Application
**Mission:** Transform the Phase I console application into a modern multi-user web application with persistent storage using Next.js, FastAPI, SQLModel, and SQLite database with JWT-based authentication.

## Core Principles

### 1. Full-Stack Architecture
- Frontend: Next.js 16+ with App Router
- Backend: Python FastAPI
- ORM: SQLModel for database operations
- Database: SQLite (for local development) with PostgreSQL option
- Authentication: JWT-based with bcrypt password hashing

### 2. Multi-User Support
- Each user has isolated data
- Authentication required for all operations
- User-specific task management
- Secure API endpoints with JWT validation and user ID matching

### 3. RESTful API Design
- Follow REST conventions
- Proper HTTP status codes
- Consistent endpoint patterns
- Standard request/response formats

### 4. Spec-Driven Development
- All features must be specified before implementation
- Claude Code must reference specifications using @specs/ notation
- Specifications are living documents that evolve with the project

### 5. Quality Gates
- All code must pass through Claude Code for implementation
- No manual coding - only specification refinement until Claude Code generates correct output
- Each endpoint must be tested before progression
- Proper error handling and validation

## Phase-Specific Principles

### Phase II: Full-Stack Web Application
- Implement all 5 Basic Level features as a web application
- Create RESTful API endpoints with proper authentication
- Build responsive frontend interface
- Store data in SQLite database (for local development) with PostgreSQL option
- Implement user authentication with JWT-based system and proper user isolation
- Follow clean architecture principles between frontend and backend
- Include password validation (6-72 characters due to bcrypt limitation)

## Technology Stack Commitments

### Core Stack
- Next.js 16+ (App Router) for frontend
- Python FastAPI for backend
- SQLModel for ORM
- SQLite (local development) with PostgreSQL option for database
- JWT-based authentication with bcrypt password hashing
- Claude Code + Spec-Kit Plus for all development

### API Endpoints
- POST /auth/register - Register a new user
- POST /auth/login - Login and get JWT token
- GET /auth/me - Get current user info from token
- GET /api/{user_id}/tasks - List all tasks for a user
- POST /api/{user_id}/tasks - Create a new task for a user
- GET /api/{user_id}/tasks/{task_id} - Get a specific task for a user
- PUT /api/{user_id}/tasks/{task_id} - Update a specific task for a user
- DELETE /api/{user_id}/tasks/{task_id} - Delete a specific task for a user
- PATCH /api/{user_id}/tasks/{task_id}/complete - Toggle completion status of a task

### Quality Tools
- Git for version control
- Proper testing at each endpoint
- Frontend and backend integration tests

## Workflow Commitments

### Development Workflow
1. Constitution (/sp.constitution): Define/update project principles
2. Specify (/sp.specify): Create features specification with user stories
3. Clarify (/sp.clarify): Resolve ambiguities in specifications
4. Plan (/sp.plan): Generate technical implementation plan
5. Tasks (/sp.tasks): Break down into actionable, testable tasks
6. Implement (/sp.implement): Execute tasks using Red-Green-Refactor
7. Document (/sp.adr): Record architectural decisions when significant
8. Record (/sp.phr): Create prompt History Records for traceability

### Quality Gates
- Each API endpoint must be functional before progression
- Frontend integration with backend must work properly
- Authentication must be properly implemented with JWT tokens
- Database operations must be secure and efficient
- All 5 Basic Level features must work in web interface
- User isolation must be enforced (one user cannot access another's tasks)
- Input fields must properly display typed text
- Password validation must enforce 6-72 character limit

## Success Metrics
- All API endpoints implemented and tested
- Frontend interface allows all 5 Basic Level operations
- Proper authentication and user isolation with JWT-based system
- Clean, maintainable code generated through Claude Code
- Successful integration between frontend and backend
- Passwords properly validated (6-72 characters) with bcrypt hashing
- Input fields properly display and update text as user types
- Tasks persist across page refreshes and user sessions